<div class="chat-content-wrapper" [style.height]="maxHeight">

  <div class="cha-messages-content" #messageContent>

    <ng-container *ngFor="let item of messages">

      <ng-container *ngIf="item?.from.id === partner?.id">
        <ng-container *ngTemplateOutlet="partnerTemplate; context: { message: item }"></ng-container>
      </ng-container>

      <ng-container *ngIf="item?.from.id === user?.id">
        <ng-container *ngTemplateOutlet="userTemplate; context: { message: item }"></ng-container>
      </ng-container>

    </ng-container>
  </div>

  <div class="chat-type">
   <textarea [formControl]="control" #input (keydown.enter)="$event.preventDefault(); sendMessage()"
             class="chat-input" placeholder="Digite algo"></textarea>
    <div class="icon-send" (click)="sendMessage()">
      <tl-icon [lib]="'ion'" [style]="'md'">send</tl-icon>
    </div>
  </div>
</div>

<ng-template #userTemplate let-message="message">
  <div class="chat-user">
    <div class="chat-text-content">
      <p>{{ message?.message }}</p>
      <span>{{ message.time | date:'HH:mm' }}</span>
    </div>
  </div>
</ng-template>

<ng-template #partnerTemplate let-message="message">
  <div class="chat-partner">
    <img src="assets/img/avatar.png">
    <div class="chat-text-content">
      <div class="chat-arrow"></div>
      <p>{{ message?.message }}</p>
      <span>{{ message.time | date:'HH:mm' }}</span>
    </div>
  </div>
</ng-template>
